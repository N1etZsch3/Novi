# 1.2 AI 聊天接口文档

本模块提供与 AI 进行交互的核心接口，支持阻塞式调用和流式调用 (SSE)。

## 1. 发送消息 (阻塞式)

适用于非实时场景或调试，等待 AI 完全生成回复后一次性返回。

- **接口地址**: `/api/v1/chat/send/call`
- **请求方式**: `POST`
- **Header**: `Authorization: <token>`
- **Content-Type**: `application/json`

### 请求参数 (ChatRequest)
| 字段名 | 类型 | 必填 | 说明 |
| :--- | :--- | :--- | :--- |
| message | string | 是 | 用户发送的消息内容。支持 `\n` 换行。 |
| sessionId | string | 否 | 当前会话ID。`null` 表示开启新会话。 |

### 响应结果 (Result<ChatResponse>)
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "response": "你好！我是 Novi，很高兴为你服务。",
    "sessionId": "session_123456",
    "title": "打招呼"
  }
}
```
- **response**: AI 的完整回复内容。
- **sessionId**: 本次对话所属的会话ID。如果是新会话，会返回新生成的ID。
- **title**: 会话标题。如果是新会话，会返回自动生成的标题；旧会话可能返回 null 或原标题。

---

## 2. 发送消息 (流式 SSE)

推荐用于实时聊天场景，AI 的回复会逐字推送，提升用户体验。

- **接口地址**: `/api/v1/chat/send/stream`
- **请求方式**: `POST`
- **Header**: `Authorization: <token>`
- **Content-Type**: `application/json`
- **Accept**: `text/event-stream`

### 请求参数 (ChatRequest)
同上 (阻塞式接口)。

### 响应结果 (Flux<String>)
响应为 `text/event-stream` 格式的事件流。每个事件的数据部分 (data) 包含 AI 生成的一个片段。

**示例流数据**:
```
data: 你
data: 好
data: ！
data: 我
data: 是
...
```

**前端处理建议**:
使用 `EventSource` 或 `fetch` API 读取流式响应，并将接收到的片段拼接显示。
