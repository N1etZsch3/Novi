# Novi é¡¹ç›®æ–‡ä»¶ç»„ç»‡ä¸ä¼˜åŒ–å»ºè®®

## ğŸ“ å½“å‰æ–‡ä»¶ç»„ç»‡æƒ…å†µ

### âœ… ç»„ç»‡è‰¯å¥½çš„æ–¹é¢

1. **æ ‡å‡†çš„ Maven é¡¹ç›®ç»“æ„**
   - æ¸…æ™°çš„ `src/main/java` å’Œ `src/test/java` åˆ†ç¦»
   - èµ„æºæ–‡ä»¶ç»Ÿä¸€æ”¾åœ¨ `src/main/resources`

2. **åˆ†å±‚æ¶æ„æ¸…æ™°**
   - Controllerã€Serviceã€Mapper å±‚æ¬¡åˆ†æ˜
   - Domain å±‚åŒºåˆ† DTO å’Œ PO
   - ä½¿ç”¨ç‹¬ç«‹çš„ Config å±‚ç®¡ç†é…ç½®

3. **SQL è„šæœ¬é›†ä¸­ç®¡ç†**
   - æ‰€æœ‰åˆå§‹åŒ–è„šæœ¬æ”¾åœ¨ `src/main/resources/static/`
   - å‘½åè§„èŒƒç»Ÿä¸€

4. **æ–‡æ¡£åˆæ­¥å®Œå–„**
   - æœ‰ READMEã€è®¾è®¡æ€è·¯ã€é‡æ„æŠ¥å‘Šç­‰æ–‡æ¡£
   - docs ç›®å½•å­˜æ”¾æ¥å£æ–‡æ¡£

## ğŸ”§ ä¼˜åŒ–å»ºè®®

### 1. æ–‡æ¡£ç»„ç»‡ä¼˜åŒ–

#### å½“å‰é—®é¢˜
- æ–‡æ¡£åˆ†æ•£åœ¨å¤šä¸ªä½ç½®ï¼ˆæ ¹ç›®å½•ã€docsç›®å½•ï¼‰
- ç¼ºå°‘ç»Ÿä¸€çš„æ–‡æ¡£ç´¢å¼•

#### å»ºè®®æ”¹è¿›
```
docs/
â”œâ”€â”€ README.md                    # æ–‡æ¡£ç´¢å¼•ï¼ˆæŒ‡å‘æ‰€æœ‰æ–‡æ¡£ï¼‰
â”œâ”€â”€ 01-å…¥é—¨æŒ‡å—/
â”‚   â”œâ”€â”€ é¡¹ç›®æ¦‚è§ˆ.md
â”‚   â”œâ”€â”€ å¿«é€Ÿå¼€å§‹.md
â”‚   â””â”€â”€ ç¯å¢ƒé…ç½®.md
â”œâ”€â”€ 02-æ¶æ„è®¾è®¡/
â”‚   â”œâ”€â”€ é¡¹ç›®ç»“æ„è¯´æ˜.md
â”‚   â”œâ”€â”€ æ•°æ®åº“è®¾è®¡æ–‡æ¡£.md
â”‚   â””â”€â”€ è®¾è®¡æ€è·¯.md
â”œâ”€â”€ 03-åŠŸèƒ½æ¨¡å—/
â”‚   â”œâ”€â”€ AIèŠå¤©åŠŸèƒ½æ¨¡å—.md
â”‚   â”œâ”€â”€ AIæ¨¡å‹é…ç½®æ¨¡å—.md
â”‚   â”œâ”€â”€ AIæç¤ºè¯ç®¡ç†æ¨¡å—.md
â”‚   â””â”€â”€ ä¼šè¯ç®¡ç†æ¨¡å—.md
â”œâ”€â”€ 04-APIæ–‡æ¡£/
â”‚   â”œâ”€â”€ APIæ¥å£æ±‡æ€».md
â”‚   â””â”€â”€ æ¥å£æ–‡æ¡£/ï¼ˆåŸæœ‰ç›®å½•ï¼‰
â””â”€â”€ 05-å…¶ä»–/
    â”œâ”€â”€ é‡æ„æŠ¥å‘Š.md
    â””â”€â”€ æ–°å¢éœ€æ±‚.md
```

### 2. ä»£ç æ–‡ä»¶ç»„ç»‡ä¼˜åŒ–

#### å»ºè®®æ·»åŠ çš„åŒ…
```java
com.n1etzsch3.novi/
â”œâ”€â”€ common/              # å…¬å…±ç»„ä»¶ï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ constants/      # å¸¸é‡ç±»
â”‚   â”œâ”€â”€ aspect/         # AOPåˆ‡é¢
â”‚   â””â”€â”€ validator/      # è‡ªå®šä¹‰éªŒè¯å™¨
â”‚
â”œâ”€â”€ enums/              # æšä¸¾ç±»ï¼ˆç°æœ‰ï¼Œå»ºè®®å®Œå–„ï¼‰
â”‚   â”œâ”€â”€ ResponseCode.java
â”‚   â”œâ”€â”€ PromptType.java
â”‚   â””â”€â”€ MessageRole.java
â”‚
â””â”€â”€ exception/          # å¼‚å¸¸ï¼ˆç°æœ‰ï¼Œå»ºè®®å®Œå–„ï¼‰
    â”œâ”€â”€ BusinessException.java
    â”œâ”€â”€ AuthException.java
    â””â”€â”€ GlobalExceptionHandler.java
```

### 3. é…ç½®æ–‡ä»¶ä¼˜åŒ–

#### å»ºè®®æ”¹è¿›
```
src/main/resources/
â”œâ”€â”€ application.yml              # ä¸»é…ç½®ï¼ˆå»ºè®®ä».propertiesæ”¹ä¸º.ymlï¼‰
â”œâ”€â”€ application-dev.yml         # å¼€å‘ç¯å¢ƒ
â”œâ”€â”€ application-prod.yml        # ç”Ÿäº§ç¯å¢ƒ
â”œâ”€â”€ application-test.yml        # æµ‹è¯•ç¯å¢ƒ
â”œâ”€â”€ logback-spring.xml          # æ—¥å¿—é…ç½®
â”œâ”€â”€ db/
â”‚   â”œâ”€â”€ migration/              # Flywayæ•°æ®åº“ç‰ˆæœ¬ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ V1__init_user.sql
â”‚   â”‚   â”œâ”€â”€ V2__init_chat.sql
â”‚   â”‚   â””â”€â”€ V3__init_ai_config.sql
â”‚   â””â”€â”€ data/                   # åˆå§‹æ•°æ®
â”‚       â””â”€â”€ prompt_config.sql
â””â”€â”€ static/                     # ä¿ç•™åŸæœ‰SQLè„šæœ¬ä½œä¸ºå‚è€ƒ
```

### 4. æµ‹è¯•æ–‡ä»¶ç»„ç»‡ä¼˜åŒ–

#### å»ºè®®å®Œå–„æµ‹è¯•ç»“æ„
```
src/test/java/
â”œâ”€â”€ controller/                 # æ§åˆ¶å™¨æµ‹è¯•
â”œâ”€â”€ service/                    # æœåŠ¡å±‚æµ‹è¯•
â”œâ”€â”€ mapper/                     # Mapperæµ‹è¯•
â”œâ”€â”€ integration/                # é›†æˆæµ‹è¯•ï¼ˆæ–°å¢ï¼‰
â””â”€â”€ utils/                      # å·¥å…·ç±»æµ‹è¯•ï¼ˆæ–°å¢ï¼‰
```

### 5. å‰ç«¯æ–‡ä»¶ç»„ç»‡

#### å½“å‰æƒ…å†µ
- `novi-v4-demo.html` åœ¨æ ¹ç›®å½•

#### å»ºè®®æ”¹è¿›
```
frontend/                       # æ–°å»ºå‰ç«¯ç›®å½•
â”œâ”€â”€ demo/
â”‚   â””â”€â”€ novi-v4-demo.html
â”œâ”€â”€ src/                       # å¦‚æœæœ‰æ­£å¼å‰ç«¯é¡¹ç›®
â””â”€â”€ README.md
```

### 6. æ—¥å¿—æ–‡ä»¶ç®¡ç†

#### å»ºè®®é…ç½®
```
logs/
â”œâ”€â”€ novi.log                    # åº”ç”¨æ—¥å¿—
â”œâ”€â”€ error.log                   # é”™è¯¯æ—¥å¿—
â”œâ”€â”€ access.log                  # è®¿é—®æ—¥å¿—
â””â”€â”€ archive/                    # å½’æ¡£æ—¥å¿—
    â””â”€â”€ 2025-11/
```

æ·»åŠ  `.gitignore` æ’é™¤æ—¥å¿—æ–‡ä»¶ï¼š
```gitignore
logs/
*.log
```

## ğŸ“‹ æ–‡ä»¶å‘½åè§„èŒƒå»ºè®®

### Java æ–‡ä»¶
- Controller: `XxxController.java`
- Service: `XxxService.java` / `XxxServiceImpl.java`
- Mapper: `XxxMapper.java`
- Entity: ä½¿ç”¨å®ä½“åç§°ï¼Œå¦‚ `UserAccount.java`
- DTO: `XxxRequest.java` / `XxxResponse.java` / `XxxDTO.java`

### é…ç½®æ–‡ä»¶
- ä½¿ç”¨å°å†™å­—æ¯å’Œè¿å­—ç¬¦: `application-dev.yml`
- SQLè„šæœ¬: è¡¨å.sql æˆ– Vç‰ˆæœ¬å·__æè¿°.sql

### æ–‡æ¡£æ–‡ä»¶
- ä½¿ç”¨ä¸­æ–‡æˆ–è‹±æ–‡ï¼Œé¿å…æ··ç”¨
- ä½¿ç”¨æœ‰æ„ä¹‰çš„åç§°ï¼Œå¦‚ `æ•°æ®åº“è®¾è®¡æ–‡æ¡£.md`

## ğŸ”’ å®‰å…¨æ€§ä¼˜åŒ–å»ºè®®

### 1. æ•æ„Ÿä¿¡æ¯ç®¡ç†
```
# å½“å‰ï¼š.env æ–‡ä»¶ï¼ˆâœ… å·²åšï¼‰
# å»ºè®®é¢å¤–æ·»åŠ ï¼š
- ä½¿ç”¨ Spring Cloud Config é›†ä¸­ç®¡ç†é…ç½®
- ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–å¯†é’¥ç®¡ç†æœåŠ¡
- .env.example æä¾›é…ç½®æ¨¡æ¿ï¼ˆä¸å«çœŸå®å¯†é’¥ï¼‰
```

### 2. API Key ä¿æŠ¤
- ä¸åœ¨æ—¥å¿—ä¸­è¾“å‡ºå®Œæ•´ API Key
- æ•°æ®åº“ä¸­åŠ å¯†å­˜å‚¨
- å‰ç«¯ä¸æš´éœ² API Key

## âš¡ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. ç¼“å­˜ç­–ç•¥
```java
// å»ºè®®æ·»åŠ ç¼“å­˜å±‚
com.n1etzsch3.novi/
â””â”€â”€ cache/
    â”œâ”€â”€ RedisCacheConfig.java
    â””â”€â”€ CacheService.java
```

### 2. æ•°æ®åº“ä¼˜åŒ–
- æ·»åŠ å¿…è¦çš„ç´¢å¼•ï¼ˆå·²åœ¨SQLä¸­å®šä¹‰ âœ…ï¼‰
- è€ƒè™‘åˆ†åº“åˆ†è¡¨ï¼ˆèŠå¤©æ¶ˆæ¯è¡¨ï¼‰
- å®šæœŸæ¸…ç†å†å²æ•°æ®

### 3. è¿æ¥æ± é…ç½®
```yaml
# application.yml
spring:
  datasource:
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
      connection-timeout: 30000
```

## ğŸ“¦ ä¾èµ–ç®¡ç†å»ºè®®

### 1. ç‰ˆæœ¬ç»Ÿä¸€ç®¡ç†
```xml
<properties>
    <java.version>21</java.version>
    <spring-ai.version>1.0.3</spring-ai.version>
    <mybatis-plus.version>3.5.7</mybatis-plus.version>
    <jwt.version>0.12.5</jwt.version>
</properties>
```

### 2. å»ºè®®æ·»åŠ çš„ä¾èµ–
- **æ—¥å¿—**: Logbackï¼ˆSpring Bootå·²åŒ…å«ï¼‰
- **ç¼“å­˜**: Spring Data Redis
- **ç›‘æ§**: Spring Boot Actuatorï¼ˆå·²æ·»åŠ  âœ…ï¼‰
- **APIæ–‡æ¡£**: SpringDoc OpenAPI
- **å·¥å…·**: Hutoolã€Apache Commons

## ğŸš€ éƒ¨ç½²ä¼˜åŒ–å»ºè®®

### 1. Docker åŒ–
åˆ›å»º `Dockerfile`:
```dockerfile
FROM openjdk:21-jdk-slim
WORKDIR /app
COPY target/Novi-0.0.1-SNAPSHOT.jar app.jar
EXPOSE 8080
ENTRYPOINT ["java", "-jar", "app.jar"]
```

åˆ›å»º `docker-compose.yml`:
```yaml
version: '3.8'
services:
  mysql:
    image: mysql:8.0
    environment:
      MYSQL_DATABASE: novi
      MYSQL_ROOT_PASSWORD: ${DB_PASSWORD}
  
  novi-app:
    build: .
    ports:
      - "8080:8080"
    depends_on:
      - mysql
```

### 2. CI/CD
åˆ›å»º `.github/workflows/build.yml`:
```yaml
name: Build and Test
on: [push, pull_request]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 21
        uses: actions/setup-java@v2
        with:
          java-version: '21'
      - name: Build with Maven
        run: mvn clean package
      - name: Run tests
        run: mvn test
```

## ğŸ“Š ä»£ç è´¨é‡å»ºè®®

### 1. ä»£ç æ£€æŸ¥
- ä½¿ç”¨ SonarQube è¿›è¡Œä»£ç è´¨é‡åˆ†æ
- æ·»åŠ  Checkstyle é…ç½®
- ä½¿ç”¨ SpotBugs æŸ¥æ‰¾æ½œåœ¨é—®é¢˜

### 2. å•å…ƒæµ‹è¯•è¦†ç›–ç‡
- ç›®æ ‡ï¼šæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ 80% ä»¥ä¸Š
- Controller å±‚åŸºæœ¬è¦†ç›–
- Service å±‚é‡ç‚¹è¦†ç›–

## ğŸ“ æ€»ç»“

### å½“å‰é¡¹ç›®ä¼˜ç‚¹
âœ… æ ‡å‡†çš„ Maven ç»“æ„  
âœ… æ¸…æ™°çš„åˆ†å±‚æ¶æ„  
âœ… ä½¿ç”¨ MyBatis-Plus ç®€åŒ–å¼€å‘  
âœ… JWT è®¤è¯æœºåˆ¶  
âœ… åŸºç¡€æ–‡æ¡£å®Œå–„  

### ä¼˜å…ˆæ”¹è¿›å»ºè®®ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰
1. **æ–‡æ¡£ç»„ç»‡**ï¼šæ•´ç†åˆ° docs ç›®å½•å¹¶åˆ†ç±»
2. **ç¯å¢ƒé…ç½®**ï¼šä½¿ç”¨ profile åŒºåˆ†ç¯å¢ƒ
3. **æ—¥å¿—é…ç½®**ï¼šå®Œå–„æ—¥å¿—ç®¡ç†
4. **æµ‹è¯•è¦†ç›–**ï¼šè¡¥å……å•å…ƒæµ‹è¯•
5. **DockeråŒ–**ï¼šä¾¿äºéƒ¨ç½²

### å¯é€‰æ”¹è¿›å»ºè®®
- å¼•å…¥ Redis ç¼“å­˜
- æ·»åŠ  API æ–‡æ¡£ç”Ÿæˆ
- å®ç° CI/CD æµç¨‹
- æ€§èƒ½ç›‘æ§å’Œå‘Šè­¦

---

**æ³¨æ„**ï¼šä»¥ä¸Šå»ºè®®å¯æ ¹æ®é¡¹ç›®å®é™…æƒ…å†µå’Œä¼˜å…ˆçº§é€æ­¥å®æ–½ï¼Œä¸éœ€è¦ä¸€æ¬¡æ€§å…¨éƒ¨å®Œæˆã€‚
