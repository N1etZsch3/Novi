# 1.7 AI 出题 API

**Base Path**: `/api/v1/questions`

| 方法   | 路径                  | 功能         | 说明 |
| ------ | --------------------- | ------------ | ---- |
| POST   | `/generate`           | 生成题目     | 核心功能，调用 AI 生成题目 |
| GET    | `/history`            | 获取出题历史 | 获取当前用户的生成记录列表 |
| GET    | `/history/{recordId}` | 获取记录详情 | 查看某次生成的具体题目内容 |
| DELETE | `/history/{recordId}` | 删除记录     | 删除单条记录 |
| DELETE | `/history`            | 批量删除记录 | 删除多条记录 |

### 1.7.1 生成题目

- **接口地址**: `/api/v1/questions/generate`
- **请求方式**: `POST`
- **Content-Type**: `application/json`
- **认证**: `Bearer Token`

#### 请求参数 (QuestionGenerationRequest)

| 字段名 | 类型 | 必填 | 说明 | 示例 |
| :--- | :--- | :--- | :--- | :--- |
| subject | string | 是 | 科目 | "湖北专升本英语" |
| questionType | string | 是 | 题型 | "语法填空" |
| difficulty | string | 是 | 难度 | "medium" |
| quantity | integer | 是 | 题目数量 (1-3) | 1 |
| theme | string | 否 | 主题 (部分题型需要) | "科技发展" |
| **enableThinking** | **boolean** | **否** | **是否启用深度思考 (默认false)** | **true** |

> [!NOTE]
> **关于深度思考 (Deep Thinking)**
> 
> - 启用 `enableThinking` 后，AI 会进行更深度的推理，生成的题目质量通常更高，但响应时间会显著增加。
> - 只有支持深度思考的模型（如 Gemini 2.0 Flash Thinking）才会真正生效。
> - 如果当前激活的模型不支持深度思考，系统会自动降级为普通模式。

#### 响应结果 (Result<QuestionGenerationResponse>)

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "id": 101,
    "generatedQuestions": "[{\"title\":\"...\",\"content\":\"...\"}]"
  }
}
```

### 1.7.2 获取出题历史

- **接口地址**: `/api/v1/questions/history`
- **请求方式**: `GET`
- **认证**: `Bearer Token`

#### 响应结果 (Result<List<QuestionHistoryItem>>)

```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "id": 101,
      "subject": "湖北专升本英语",
      "questionType": "语法填空",
      "difficulty": "medium",
      "quantity": 1,
      "enableThinking": true,
      "createdAt": "2025-12-01T10:00:00"
    }
  ]
}
```

### 1.7.3 获取记录详情

- **接口地址**: `/api/v1/questions/history/{recordId}`
- **请求方式**: `GET`
- **认证**: `Bearer Token`

#### 路径参数

| 参数名 | 类型 | 说明 |
| :--- | :--- | :--- |
| recordId | long | 记录 ID |

#### 响应结果 (Result<QuestionGenerationResponse>)

返回结构同 **1.7.1 生成题目** 的响应数据。

### 1.7.4 删除记录

- **接口地址**: `/api/v1/questions/history/{recordId}`
- **请求方式**: `DELETE`
- **认证**: `Bearer Token`

#### 路径参数

| 参数名 | 类型 | 说明 |
| :--- | :--- | :--- |
| recordId | long | 要删除的记录 ID |

#### 响应结果 (Result<Void>)

```json
{
  "code": 200,
  "message": "success",
  "data": null
}
```

### 1.7.5 批量删除记录

- **接口地址**: `/api/v1/questions/history`
- **请求方式**: `DELETE`
- **Content-Type**: `application/json`
- **认证**: `Bearer Token`

#### 请求参数 (List<Long>)

```json
[101, 102, 103]
```

#### 响应结果 (Result<Void>)

```json
{
  "code": 200,
  "message": "success",
  "data": null
}
```
