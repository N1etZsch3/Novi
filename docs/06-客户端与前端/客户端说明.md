# 客户端与前端说明文档

本文档详细说明了 Novi 项目提供的三种客户端实现：Web 前端、Java 命令行客户端和 Java GUI 客户端。

## 1. Web 前端 (`novi-view/novi-v5.html`)

`novi-v5.html` 是一个单文件 HTML 应用，提供了完整的 AI 聊天和会话管理功能。

### 1.1 主要功能

*   **用户认证**：支持用户登录和注册（注册功能提示使用 Postman）。
*   **会话管理**：
    *   查看会话列表。
    *   新建会话。
    *   删除会话（右键菜单）。
    *   切换会话，自动加载历史消息。
*   **AI 聊天**：
    *   **流式响应 (SSE)**：使用 Server-Sent Events 技术实现打字机效果的实时回复。
    *   **Markdown 渲染**：支持 Markdown 格式的消息渲染（代码块、列表、加粗等）。
    *   **自动滚动**：消息发送和接收时自动滚动到底部。
*   **用户体验**：
    *   响应式布局。
    *   加载状态提示。
    *   错误处理与提示。

### 1.2 技术栈

*   **HTML5/CSS3**：原生构建，无构建工具依赖。
*   **JavaScript (ES6+)**：
    *   `fetch` API 用于常规 HTTP 请求。
    *   `EventSource` 用于 SSE 流式通信。
    *   `marked.js` 用于 Markdown 渲染。
    *   `highlight.js` 用于代码高亮。

---

## 2. Java 命令行客户端 (`NoviConsoleClient.java`)

`NoviConsoleClient` 是一个纯 Java 实现的轻量级命令行客户端，适合在无图形界面的服务器或终端环境中使用。

### 2.1 主要功能

*   **交互式菜单**：提供登录、注册选择菜单。
*   **命令行聊天**：
    *   支持流式输出（通过 ANSI 转义码实现颜色高亮）。
    *   支持上下文记忆（自动携带 `sessionId`）。
    *   输入 `new` 开启新会话。
    *   输入 `exit` 退出程序。
*   **HTTP 通信**：使用 `OkHttp` 库进行网络请求。

### 2.2 运行方式

直接运行 `com.n1etzsch3.novi.client.NoviConsoleClient` 类的 `main` 方法。

---

## 3. Java GUI 客户端 (`NoviGuiClient.java`)

`NoviGuiClient` 是基于 Java Swing 开发的桌面图形界面客户端，提供了类似微信/QQ 的聊天体验。

### 3.1 主要功能

*   **图形化界面**：
    *   **登录/注册页**：美观的卡片式登录界面。
    *   **聊天主界面**：左右分栏布局（左侧会话列表，右侧聊天窗口）。
*   **会话管理**：
    *   会话列表实时刷新。
    *   右键删除会话。
    *   点击切换会话。
*   **气泡聊天**：
    *   仿微信气泡样式（用户绿色，AI 白色）。
    *   支持自动换行和动态高度计算。
    *   流式响应实时更新气泡内容。
*   **macOS 优化**：
    *   适配 macOS 全局菜单栏。
    *   优化输入法兼容性。
    *   开启字体抗锯齿。
*   **性能优化**：
    *   使用 `ExecutorService` 线程池管理网络请求，避免 UI 卡顿。

### 3.2 依赖库

*   `OkHttp`：网络请求。
*   `Jackson`：JSON 解析。
*   `Java Swing`：原生 UI 库。

### 3.3 运行方式

直接运行 `com.n1etzsch3.novi.client.NoviGuiClient` 类的 `main` 方法。
