# Novi Â· æŒšå‹ (AI Companion Backend)

> **è®© AI ä¸ä»…ä»…æ˜¯å·¥å…·ï¼Œæ›´æ˜¯ç‹¬ä¸€æ— äºŒçš„æŒšå‹ã€‚**

Novi æ˜¯ä¸€ä¸ªåŸºäº **Spring Boot 3** å’Œ **Spring AI** æ„å»ºçš„æ™ºèƒ½å¯¹è¯åç«¯ç³»ç»Ÿã€‚å®ƒæ—¨åœ¨é€šè¿‡**é•¿æœŸè®°å¿† (Long-term Memory)** å’Œ **ä¸ªæ€§åŒ–åå¥½ (Personalization)**ï¼Œä¸ºç”¨æˆ·æä¾›å…·æœ‰è¿è´¯æ€§ã€åŒç†å¿ƒå’Œç‹¬ç‰¹äººæ ¼çš„ AI ä¼´ä¾£ä½“éªŒã€‚

---

## ğŸ›  æŠ€æœ¯æ ˆ (Tech Stack)

- **æ ¸å¿ƒæ¡†æ¶**: Spring Boot 3.5.7 (Java 21)
- **AI æ¥å…¥**: Spring AI (å…¼å®¹ OpenAI åè®®ï¼Œå½“å‰é€‚é…è®¯é£æ˜Ÿç«/é€šä¹‰åƒé—®ç­‰)
- **æ•°æ®åº“**: MySQL 8.0
- **ORM æ¡†æ¶**: MyBatis-Plus 3.5.7
- **é‰´æƒå®‰å…¨**: Spring Security + JWT (Json Web Token)
- **JSON å¤„ç†**: Jackson
- **æ„å»ºå·¥å…·**: Maven
- **å‰ç«¯æ¡†æ¶**ï¼šVue 3 + Vite + Bootstrap 5 (novi-vue-app)

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§ (Features)

### 1. ğŸ” ç”¨æˆ·ä¸å®‰å…¨ä½“ç³»
- **JWT æ— çŠ¶æ€è®¤è¯**ï¼šåŸºäº Token çš„å®‰å…¨éªŒè¯æœºåˆ¶ã€‚
- **å¯†ç åŠ å¯†**ï¼šä½¿ç”¨ BCrypt å¼ºå“ˆå¸Œç®—æ³•å­˜å‚¨å¯†ç ã€‚
- **ä¸ªæ€§åŒ–é…ç½®**ï¼šæ”¯æŒå­˜å‚¨ç”¨æˆ·åå¥½ï¼ˆå¦‚ AI æ€§æ ¼ã€è¯´è¯è¯­æ°”ï¼‰ï¼ŒåŠ¨æ€è°ƒæ•´ Promptã€‚

### 2. ğŸ’¬ æ™ºèƒ½å¯¹è¯ç³»ç»Ÿ (Core Chat)
- **åŒæ¨¡å¼å“åº”**ï¼š
  - **é˜»å¡å¼ (Blocking)**ï¼šé€‚åˆç®€å•é—®ç­”ï¼Œä¸€æ¬¡æ€§è¿”å›å®Œæ•´ç»“æœã€‚
  - **æµå¼ (Streaming)**ï¼šåŸºäº SSE (Server-Sent Events)ï¼Œå®ç°æ‰“å­—æœºæ•ˆæœï¼Œé¦–å­—å»¶è¿Ÿæä½ã€‚
- **è‡ªåŠ¨ä¼šè¯ç®¡ç†**ï¼š
  - æ™ºèƒ½è¯†åˆ«æ–°æ—§ä¼šè¯ã€‚
  - **è‡ªåŠ¨èµ·æ ‡é¢˜**ï¼šæ ¹æ®é¦–æ¡æ¶ˆæ¯å†…å®¹è‡ªåŠ¨ç”Ÿæˆä¼šè¯æ ‡é¢˜ï¼ˆå‰20å­—ï¼‰ã€‚
- **ä¸Šä¸‹æ–‡è®°å¿†**ï¼š
  - åŸºäºæ•°æ®åº“ (`chat_message` è¡¨) å®ç°çš„æŒä¹…åŒ–èŠå¤©è®°å¿† (`NoviDatabaseChatMemory`)ã€‚
  - æ”¯æŒå¤šè½®å¯¹è¯ï¼ŒAI èƒ½è®°ä½ä¹‹å‰çš„èŠå¤©å†…å®¹ã€‚
  - *(è®¡åˆ’ä¸­)* é•¿æœŸäº‹å®è®°å¿†æå– (Long-term Memory Extraction)ã€‚

### 3. ğŸ“š ä¼šè¯ä¸å†å²ç®¡ç†
- **ä¾§è¾¹æ ä¼šè¯åˆ—è¡¨**ï¼šæŒ‰æœ€åæ´»è·ƒæ—¶é—´æ’åºã€‚
- **å†å²å›æº¯**ï¼šéšæ—¶åŠ è½½æŸ¥çœ‹ä»»æ„ä¼šè¯çš„å®Œæ•´å†å²è®°å½•ã€‚
- **è½¯åˆ é™¤**ï¼šæ”¯æŒé€»è¾‘åˆ é™¤ä¼šè¯ï¼Œä¿éšœæ•°æ®å®‰å…¨ã€‚

### 4. ğŸ§  AI æ™ºèƒ½å‡ºé¢˜ (AI Question Generation)
- **å¤šç»´åº¦å®šåˆ¶**ï¼šæ”¯æŒé€‰æ‹©ç§‘ç›®ã€é¢˜å‹ã€éš¾åº¦ã€æ•°é‡å’Œä¸»é¢˜ã€‚
- **æ·±åº¦æ€è€ƒæ¨¡å¼**ï¼šå¯ç”¨å AI å°†è¿›è¡Œæ›´æ·±å±‚æ¬¡çš„æ¨ç†ï¼Œç”Ÿæˆé«˜è´¨é‡é¢˜ç›®ã€‚
- **å¥—å·ç”Ÿæˆ**ï¼šæ”¯æŒç”ŸæˆåŒ…å«å¤šç§é¢˜å‹çš„å®Œæ•´è¯•å· (`Paper Generation`)ã€‚
- **å†å²è®°å½•**ï¼šè‡ªåŠ¨ä¿å­˜ç”Ÿæˆçš„é¢˜ç›®å’Œå¥—å·ï¼Œæ–¹ä¾¿éšæ—¶å›çœ‹ã€‚

---

## ğŸš€ å¿«é€Ÿå¼€å§‹ (Quick Start)

### 1. ç¯å¢ƒå‡†å¤‡
- **Java**: JDK 21+
- **Database**: MySQL 8.0+
- **Node.js**: v18+ (ç”¨äºå‰ç«¯)
- **Python**: 3.x (ç”¨äºåˆå§‹åŒ–è„šæœ¬)

### 2. é¡¹ç›®åˆå§‹åŒ–
æˆ‘ä»¬æä¾›äº†ä¸€é”®åˆå§‹åŒ–è„šæœ¬ï¼Œç”¨äºé…ç½®æ•°æ®åº“è¿æ¥ã€æ‰§è¡Œ SQL è¿ç§»ã€é…ç½® AI æ¨¡å‹å¹¶ç”Ÿæˆ `.env` æ–‡ä»¶ã€‚

**Mac / Linux**:
```bash
# æ·»åŠ æ‰§è¡Œæƒé™ (ä»…éœ€ä¸€æ¬¡)
chmod +x script/setup.sh
# è¿è¡Œ
./script/setup.sh
```

**Windows**:
```bat
script\setup.bat
```

> è„šæœ¬è¿è¡Œè¿‡ç¨‹ä¸­ä¼šæç¤ºæ‚¨è¾“å…¥ MySQL è¿æ¥ä¿¡æ¯ä»¥åŠ AI æ¨¡å‹é…ç½®ï¼ˆBaseURL, API Key ç­‰ï¼‰ã€‚

### 3. å¯åŠ¨åç«¯ (Backend)
åç«¯æœåŠ¡è¿è¡Œåœ¨ `8080` ç«¯å£ã€‚è¯·ç¡®ä¿ `.env` æ–‡ä»¶å·²æˆåŠŸç”Ÿæˆã€‚

**ä½¿ç”¨ Maven**:
```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
mvn clean spring-boot:run -pl novi-web
```

**æˆ–è€…ä½¿ç”¨ IDE**:
æ‰“å¼€ `novi-web/src/main/java/com/n1etzsch3/novi/web/NoviApplication.java` å¹¶è¿è¡Œ `main` æ–¹æ³•ã€‚

### 4. å¯åŠ¨å‰ç«¯ (Frontend)
å‰ç«¯é¡µé¢é»˜è®¤è¿è¡Œåœ¨ `5173` ç«¯å£ã€‚

```bash
cd novi-vue-app
npm install  # å®‰è£…ä¾èµ– (ä»…éœ€ä¸€æ¬¡)
npm run dev  # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```

å¯åŠ¨æˆåŠŸåï¼Œè®¿é—®: [http://localhost:5173](http://localhost:5173)

## ğŸ“‚ ç›®å½•ç»“æ„

```Plaintext
Novi (Root)
â”œâ”€â”€ novi-common      # å…¬å…±æ¨¡å—ï¼šå®ä½“ç±»(Entity), DTO, å·¥å…·ç±»(Utils), å¼‚å¸¸(Exception), æšä¸¾(Enums)
â”œâ”€â”€ novi-user        # ç”¨æˆ·æ¨¡å—ï¼šç”¨æˆ·ç®¡ç† Service, Mapper, DTO, æ‹¦æˆªå™¨
â”œâ”€â”€ novi-chat        # èŠå¤©æ¨¡å—ï¼šèŠå¤© Service, Mapper, Repository (ChatMemory), DTO
â”œâ”€â”€ novi-question    # å‡ºé¢˜æ¨¡å—ï¼šAIå‡ºé¢˜ Service, Mapper, DTO
â”œâ”€â”€ novi-ai-config   # AIé…ç½®æ¨¡å—ï¼šæ¨¡å‹ä¸æç¤ºè¯é…ç½® Service, Mapper, Factory, DTO
â”œâ”€â”€ novi-web         # Webæ¨¡å—ï¼šå¯åŠ¨ç±», æ§åˆ¶å™¨(Controller), å…¨å±€é…ç½®(Config), èµ„æºæ–‡ä»¶(Resources)
â””â”€â”€ novi-vue-app     # å‰ç«¯æ¨¡å—ï¼šåŸºäº Vue 3 + Vite æ„å»ºçš„ç°ä»£åŒ– Web å®¢æˆ·ç«¯
```
